"use client";

import { createContext, useContext, useState, useEffect, type ReactNode } from "react";

export type Locale = "ar" | "en";

// The translation dictionary type
type TranslationDict = Record<string, string>;

const TRANSLATIONS: Record<Locale, TranslationDict> = {
  ar: {
    // common.*
    "common.save": "حفظ",
    "common.cancel": "إلغاء",
    "common.close": "إغلاق",
    "common.edit": "تعديل",
    "common.delete": "حذف",
    "common.yes": "نعم",
    "common.no": "لا",
    "common.loading": "جاري التحميل...",
    "common.error": "خطأ",
    "common.emptyClickToAdd": "(فارغ — انقر للإضافة)",
    "common.collapse": "طي",
    "common.expand": "توسيع",
    "common.rawJson": "JSON الخام",
    "common.clickToEdit": "انقر على أي حقل للتعديل",
    "common.confidence": "الثقة",

    // page.*
    "page.dbView": "عرض قاعدة البيانات",
    "page.manualEntry": "إدخال يدوي",
    "page.idlePrompt": "أدخل رقم الطلب لتحميل سياق القضية",
    "page.idleDescription": "يتم تحميل نفس البيانات التي يتلقاها وكيل التكثيف من قاعدة البيانات",
    "page.loadingContext": "جاري تحميل سياق الطلب من قاعدة البيانات...",
    "page.loadFailed": "فشل في تحميل السياق",

    // controlRow.*
    "controlRow.applicationId": "رقم الطلب",
    "controlRow.placeholder": "مثال: a0000001-1111-2222-3333-444444444444",
    "controlRow.idle": "خامل",
    "controlRow.loadingStatus": "جاري التحميل...",
    "controlRow.loaded": "تم التحميل",
    "controlRow.errorStatus": "خطأ",
    "controlRow.loadContext": "تحميل السياق",
    "controlRow.runAgents": "تشغيل الوكلاء",
    "controlRow.running": "جاري التشغيل...",
    "controlRow.parties": "أطراف",
    "controlRow.documents": "مستندات",
    "controlRow.at": "في",
    "controlRow.step1Running": "الخطوة 1/2: تشغيل وكيل التكثيف...",
    "controlRow.step1Done": "اكتملت الخطوة 1/2، بدء البحث القانوني...",
    "controlRow.step2Running": "الخطوة 2/2: تشغيل البحث القانوني...",
    "controlRow.agentsComplete": "اكتمل عمل الوكلاء",
    "controlRow.condenserFailed": "فشل وكيل التكثيف",
    "controlRow.legalSearchFailed": "فشل البحث القانوني",

    // structuredPanel.*
    "structuredPanel.title": "السياق المنظم",
    "structuredPanel.application": "الطلب",
    "structuredPanel.applicationNumber": "رقم الطلب",
    "structuredPanel.status": "الحالة",
    "structuredPanel.processingStage": "مرحلة المعالجة",
    "structuredPanel.transactionType": "نوع المعاملة",
    "structuredPanel.transactionValue": "قيمة المعاملة",
    "structuredPanel.subjectEn": "الموضوع (إنجليزي)",
    "structuredPanel.subjectAr": "الموضوع (عربي)",
    "structuredPanel.poaDurationType": "نوع مدة التوكيل",
    "structuredPanel.poaStartDate": "تاريخ بداية التوكيل",
    "structuredPanel.poaEndDate": "تاريخ نهاية التوكيل",
    "structuredPanel.submittedAt": "تاريخ التقديم",
    "structuredPanel.parties": "الأطراف",
    "structuredPanel.noParties": "لم يتم العثور على أطراف",
    "structuredPanel.firstParty": "الطرف الأول",
    "structuredPanel.secondParty": "الطرف الثاني",
    "structuredPanel.thirdParty": "الطرف الثالث",
    "structuredPanel.fullNameEn": "الاسم الكامل (إنجليزي)",
    "structuredPanel.fullNameAr": "الاسم الكامل (عربي)",
    "structuredPanel.capacity": "الصفة",
    "structuredPanel.idType": "نوع الهوية",
    "structuredPanel.idNumber": "رقم الهوية",
    "structuredPanel.idExpiry": "تاريخ انتهاء الهوية",
    "structuredPanel.nationality": "الجنسية",
    "structuredPanel.gender": "الجنس",
    "structuredPanel.phone": "الهاتف",
    "structuredPanel.email": "البريد الإلكتروني",
    "structuredPanel.permissions": "الصلاحيات المطلوب منحها",
    "structuredPanel.noPermissions": "لم يتم العثور على صلاحيات",
    "structuredPanel.poaFullText": "نص التوكيل الكامل",
    "structuredPanel.proof": "إثبات",
    "structuredPanel.capacityType": "نوع الصفة",
    "structuredPanel.crNumber": "رقم السجل التجاري",
    "structuredPanel.companyName": "اسم الشركة",
    "structuredPanel.crExpiry": "تاريخ انتهاء السجل",
    "structuredPanel.poaDate": "تاريخ التوكيل",
    "structuredPanel.poaExpiry": "تاريخ انتهاء التوكيل",
    "structuredPanel.generalPoa": "توكيل عام",
    "structuredPanel.specialPoa": "توكيل خاص",
    "structuredPanel.substitutionRight": "حق الإنابة",
    "structuredPanel.english": "إنجليزي",
    "structuredPanel.arabic": "عربي",
    "structuredPanel.fullStructuredJson": "البيانات المنظمة الكاملة (JSON)",

    // unstructuredPanel.*
    "unstructuredPanel.title": "استخراج المستندات",
    "unstructuredPanel.noExtractions": "لا توجد استخراجات مستندات متاحة.",
    "unstructuredPanel.rawTextAr": "النص الخام (عربي)",
    "unstructuredPanel.rawTextEn": "النص الخام (إنجليزي)",
    "unstructuredPanel.noRawText": "لا يوجد نص خام متاح لهذا المستند",
    "unstructuredPanel.extractedFields": "الحقول المستخرجة",
    "unstructuredPanel.fullUnstructuredJson": "البيانات غير المنظمة الكاملة (JSON)",

    // docTypes.*
    "docTypes.PERSONAL_ID": "هوية شخصية",
    "docTypes.COMMERCIAL_REGISTRATION": "سجل تجاري",
    "docTypes.AUTHORIZATION": "تفويض",
    "docTypes.POWER_OF_ATTORNEY": "توكيل",
    "docTypes.PASSPORT": "جواز سفر",
    "docTypes.TRADE_LICENSE": "رخصة تجارية",
    "docTypes.FOUNDATION_CONTRACT": "عقد تأسيس",
    "docTypes.ESTABLISHMENT_RECORD": "قيد منشأة",

    // manualEntry.*
    "manualEntry.title": "إدخال يدوي",
    "manualEntry.idle": "خامل",
    "manualEntry.running": "جاري التشغيل...",
    "manualEntry.completed": "مكتمل",
    "manualEntry.failed": "فشل",
    "manualEntry.attachment": "مرفق",
    "manualEntry.attachments": "مرفقات",
    "manualEntry.saved": "محفوظ",
    "manualEntry.condenser": "التكثيف",
    "manualEntry.legalSearch": "البحث القانوني",

    // appForm.*
    "appForm.title": "بيانات الطلب",
    "appForm.subtitle": "إدخال يدوي",
    "appForm.applicationType": "نوع الطلب",
    "appForm.selectType": "— اختر نوع الطلب —",
    "appForm.firstParty": "الطرف الأول",
    "appForm.secondParty": "الطرف الثاني",
    "appForm.capacity": "الصفة",
    "appForm.selectPlaceholder": "— اختر —",
    "appForm.selectCapacity": "— اختر الصفة —",
    "appForm.idType": "نوع الهوية",
    "appForm.selectIdType": "— اختر نوع الهوية —",
    "appForm.idNumber": "رقم الهوية",
    "appForm.expirationDate": "تاريخ الانتهاء",
    "appForm.citizenship": "الجنسية",
    "appForm.fullName": "الاسم الكامل",
    "appForm.phone": "رقم الهاتف",
    "appForm.email": "البريد الإلكتروني",
    "appForm.namadhij": "النماذج (الصلاحيات المطلوب منحها)",
    "appForm.namadhijPlaceholder": "أدخل الصلاحيات / الصلاحيات المطلوب منحها...",

    // attachPanel.*
    "attachPanel.title": "استخراج مرفقات SAK (OCR)",
    "attachPanel.subtitle": "إدخال يدوي",
    "attachPanel.addAttachment": "إضافة مرفق",
    "attachPanel.selectType": "اختر نوع المرفق:",
    "attachPanel.extractedFields": "الحقول المستخرجة",
    "attachPanel.signatories": "المفوضون بالتوقيع",
    "attachPanel.addSignatory": "إضافة مفوض",
    "attachPanel.noSignatories": "لم تتم إضافة مفوضين بعد",
    "attachPanel.rawTextAr": "النص الخام (عربي)",
    "attachPanel.rawTextEn": "النص الخام (إنجليزي)",
    "attachPanel.rawText": "النص الخام",
    "attachPanel.saved": "محفوظ",
    "attachPanel.unsavedChanges": "تغييرات غير محفوظة",
    "attachPanel.saveAttachment": "حفظ المرفق",
    "attachPanel.savedMessage": "تم حفظ تفاصيل المرفق",
    "attachPanel.unsavedMessage": "تغييرات غير محفوظة",
    "attachPanel.deleteAttachment": "حذف المرفق",
    "attachPanel.emptyState": "اضغط \"+ إضافة مرفق\" لإنشاء مرفق جديد",
    "attachPanel.nameEn": "الاسم (إنجليزي)",
    "attachPanel.idNumberField": "رقم الهوية",
    "attachPanel.nationalityEn": "الجنسية (إنجليزي)",
    "attachPanel.percentage": "النسبة",
    "attachPanel.position": "المنصب",

    // validation.*
    "validation.tier1Failed": "فحص المستوى الأول فشل",
    "validation.tier1Warnings": "فحص المستوى الأول تحذيرات",
    "validation.errors": "أخطاء",
    "validation.warnings": "تحذيرات",
    "validation.errorCount": "خطأ",
    "validation.warningCount": "تحذير",
    "validation.goBackAndFix": "العودة والإصلاح",
    "validation.proceedWithWarnings": "المتابعة مع التحذيرات",
    "validation.fixErrors": "إصلاح الأخطاء قبل تشغيل الوكلاء",

    // validation.* - Category names
    "validation.expiredDocument": "مستند منتهي الصلاحية",
    "validation.missingData": "بيانات ناقصة",
    "validation.crossValidation": "تحقق متبادل",
    "validation.crossValidationMismatch": "عدم تطابق في التحقق المتبادل",
    "validation.missingAttachment": "مرفق ناقص",
    "validation.unsavedData": "بيانات غير محفوظة",

    // validation.* - Messages for runTier1Checks
    "validation.unknownParty": "طرف غير معروف",
    "validation.idOf": "هوية",
    "validation.expiredOn": "انتهت بتاريخ",
    "validation.partyNationalId": "الرقم الشخصي للطرف",
    "validation.poaEndDatePast": "تاريخ انتهاء التوكيل في الماضي",
    "validation.capacityProof": "إثبات الصفة",
    "validation.poaExpiryPast": "تاريخ انتهاء التوكيل في الماضي",
    "validation.crExpiryPast": "تاريخ انتهاء السجل التجاري في الماضي",
    "validation.extractedIdOf": "الهوية المستخرجة لـ",
    "validation.unknown": "غير معروف",
    "validation.docExtraction": "استخراج المستند رقم ",
    "validation.noIdInStructured": "ليس لديه رقم هوية في البيانات المنظمة",
    "validation.noIdExtractionFound": "لم يتم العثور على استخراج هوية لـ",
    "validation.idNumber": "رقم الهوية",
    "validation.partyNoMatchingExtraction": "الطرف في البيانات المنظمة ليس له استخراج هوية مطابق",
    "validation.idExpiryMismatch": "عدم تطابق في تاريخ انتهاء الهوية",
    "validation.structured": "البيانات المنظمة",
    "validation.extracted": "المستخرج",
    "validation.nationalityMismatch": "عدم تطابق في الجنسية",
    "validation.nameMismatch": "عدم تطابق في الاسم مع الهوية المستخرجة",
    "validation.idTypeMismatch": "عدم تطابق في نوع الهوية",
    "validation.unmatchedExtraction": "ليس لها طرف مطابق في البيانات المنظمة",
    "validation.applicationNumberEmpty": "رقم الطلب فارغ",
    "validation.partyHasNoName": "ليس لديه اسم",
    "validation.partyIdLabel": "رقم الهوية",
    "validation.noPartiesFound": "لم يتم العثور على أطراف في البيانات المنظمة",
    "validation.party": "طرف",

    // validation.* - Messages for runManualTier1Checks
    "validation.firstParty": "الطرف الأول",
    "validation.secondParty": "الطرف الثاني",
    "validation.noAppTypeSelected": "لم يتم اختيار نوع الطلب",
    "validation.partyNoName": "ليس لديه اسم",
    "validation.partyNoId": "ليس لديه رقم هوية",
    "validation.noAttachments": "لم يتم إضافة مرفقات",
    "validation.partiesButNoId": "يوجد أطراف لكن لم يتم إرفاق هوية شخصية",
    "validation.addIdBeforeAgents": "أضف مرفق هوية شخصية لكل طرف قبل تشغيل الوكلاء",
    "validation.unsavedAttachments": "مرفق(ات) بها تغييرات غير محفوظة",
    "validation.saveBeforeAgents": "احفظ كل مرفق قبل تشغيل الوكلاء لضمان تضمين البيانات",
    "validation.noName": "بدون اسم",
    "validation.idExpiredOn": "الهوية انتهت بتاريخ",
    "validation.idAttachmentNum": "مرفق الهوية رقم",
    "validation.attachment": "المرفق",
    "validation.crOf": "السجل التجاري لـ",
    "validation.crNum": "سجل تجاري رقم",
    "validation.expiredOnDate": "انتهى بتاريخ",
    "validation.signatoryLabel": "مخول بالتوقيع رقم",
    "validation.signatoryIdNoMatch": "رقم الهوية لا يطابق أي طرف",
    "validation.expectedOneOf": "المتوقع أحد",
    "validation.signatoryNameNoMatch": "لا يطابق أي اسم طرف",
    "validation.partyNames": "أسماء الأطراف",
    "validation.signatoryNationalityMismatch": "عدم تطابق في الجنسية مع",
    "validation.signatory": "مخول التوقيع",
    "validation.noIdAttachmentForParty": "لم يتم العثور على مرفق هوية مطابق لرقم هوية",
    "validation.noMatchingIdExtraction": "لا يوجد استخراج هوية مطابق",
    "validation.formLabel": "النموذج",

    // resultsDrawer.*
    "resultsDrawer.title": "نتائج الوكلاء",
    "resultsDrawer.legalBrief": "الموجز القانوني",
    "resultsDrawer.legalOpinion": "الرأي القانوني",
    "resultsDrawer.rawJson": "JSON الخام",
    "resultsDrawer.close": "إغلاق",
    "resultsDrawer.caseSummary": "ملخص القضية",
    "resultsDrawer.applicationNumber": "رقم الطلب",
    "resultsDrawer.transactionType": "نوع المعاملة",
    "resultsDrawer.description": "الوصف",
    "resultsDrawer.parties": "الأطراف",
    "resultsDrawer.party": "طرف",
    "resultsDrawer.partiesPlural": "أطراف",
    "resultsDrawer.nameAr": "الاسم (عربي)",
    "resultsDrawer.nameEn": "الاسم (إنجليزي)",
    "resultsDrawer.idNumber": "رقم الهوية",
    "resultsDrawer.nationality": "الجنسية",
    "resultsDrawer.claimedCapacity": "الصفة المطالب بها",
    "resultsDrawer.capacityEvidence": "إثبات الصفة",
    "resultsDrawer.entityInfo": "معلومات الكيان",
    "resultsDrawer.companyAr": "الشركة (عربي)",
    "resultsDrawer.companyEn": "الشركة (إنجليزي)",
    "resultsDrawer.registrationNumber": "رقم السجل",
    "resultsDrawer.entityType": "نوع الكيان",
    "resultsDrawer.registeredAuthorities": "المفوضون المسجلون",
    "resultsDrawer.name": "الاسم",
    "resultsDrawer.position": "المنصب",
    "resultsDrawer.authorityScope": "نطاق الصلاحية",
    "resultsDrawer.id": "الهوية",
    "resultsDrawer.poaDetails": "تفاصيل التوكيل",
    "resultsDrawer.type": "النوع",
    "resultsDrawer.duration": "المدة",
    "resultsDrawer.substitutionRight": "حق الإنابة",
    "resultsDrawer.grantedPowers": "الصلاحيات الممنوحة",
    "resultsDrawer.poaTextEn": "نص التوكيل (إنجليزي)",
    "resultsDrawer.poaTextAr": "نص التوكيل (عربي)",
    "resultsDrawer.evidenceSummary": "ملخص الأدلة",
    "resultsDrawer.document": "مستند",
    "resultsDrawer.documentsPlural": "مستندات",
    "resultsDrawer.factComparisons": "مقارنة الحقائق",
    "resultsDrawer.comparison": "مقارنة",
    "resultsDrawer.comparisons": "مقارنات",
    "resultsDrawer.factType": "الحقيقة",
    "resultsDrawer.source1": "المصدر 1",
    "resultsDrawer.source2": "المصدر 2",
    "resultsDrawer.match": "تطابق",
    "resultsDrawer.notes": "ملاحظات",
    "resultsDrawer.openQuestions": "أسئلة مفتوحة",
    "resultsDrawer.question": "سؤال",
    "resultsDrawer.questions": "أسئلة",
    "resultsDrawer.missingInfo": "معلومات ناقصة",
    "resultsDrawer.item": "عنصر",
    "resultsDrawer.items": "عناصر",
    "resultsDrawer.extractionConfidence": "ثقة الاستخراج",
    "resultsDrawer.generatedAt": "تاريخ الإنشاء",
    "resultsDrawer.application": "الطلب",
    "resultsDrawer.confidenceLevel": "مستوى الثقة",
    "resultsDrawer.condenserLabel": "وكيل التكثيف (الموجز القانوني)",
    "resultsDrawer.legalSearchLabel": "وكيل البحث القانوني (الرأي)",
    "resultsDrawer.opinionSummary": "ملخص الرأي",
    "resultsDrawer.englishSummary": "الملخص الإنجليزي",
    "resultsDrawer.arabicSummary": "الملخص العربي",
    "resultsDrawer.issuesAnalyzed": "المسائل المحللة",
    "resultsDrawer.issue": "مسألة",
    "resultsDrawer.issues": "مسائل",
    "resultsDrawer.supportingArticles": "المواد الداعمة",
    "resultsDrawer.article": "مادة",
    "resultsDrawer.concerns": "ملاحظات",
    "resultsDrawer.recommendations": "التوصيات",
    "resultsDrawer.conditions": "الشروط",
    "resultsDrawer.citations": "الاستشهادات القانونية",
    "resultsDrawer.articlesCount": "مواد",
    "resultsDrawer.similarity": "التشابه",
    "resultsDrawer.laws": "قوانين",
    "resultsDrawer.unknownLaw": "قانون غير محدد",
    "resultsDrawer.crossRef": "مرجع متقاطع",
    "resultsDrawer.source": "المصدر",
    "resultsDrawer.verificationMetrics": "مقاييس التحقق",
    "resultsDrawer.groundingScore": "درجة التأسيس",
    "resultsDrawer.retrievalCoverage": "تغطية الاسترجاع",
    "resultsDrawer.coverageScore": "درجة التغطية",
    "resultsDrawer.iterations": "التكرارات",
    "resultsDrawer.articles": "المواد",
    "resultsDrawer.stopReason": "سبب التوقف",
    "resultsDrawer.avgSimilarity": "متوسط التشابه",
    "resultsDrawer.top3Similarity": "أعلى 3 تشابه",
    "resultsDrawer.responseTime": "زمن الاستجابة",
    "resultsDrawer.estimatedCost": "التكلفة التقديرية",
    "resultsDrawer.noCondenserResults": "لا توجد نتائج من وكيل التكثيف بعد.",
    "resultsDrawer.legalSearchRunning": "وكيل البحث القانوني قيد التشغيل... قد يستغرق بعض الوقت",
    "resultsDrawer.legalSearchFailed": "فشل وكيل البحث القانوني",
    "resultsDrawer.legalSearchPending": "لم يتم تشغيل البحث القانوني بعد. سيبدأ تلقائياً",
    "resultsDrawer.noResults": "لا توجد نتائج بعد.",
    "resultsDrawer.valid": "صالح",
    "resultsDrawer.invalid": "غير صالح",
    "resultsDrawer.validWithConditions": "صالح مع شروط",
    "resultsDrawer.requiresReview": "يتطلب مراجعة",
    "resultsDrawer.inconclusive": "غير حاسم",
    "resultsDrawer.needsReview": "يحتاج مراجعة",
    "resultsDrawer.validBucket": "صالح",
    "resultsDrawer.validWithRemediations": "صالح مع تصحيحات",
    "resultsDrawer.invalidBucket": "غير صالح",
  },
  en: {
    // common.*
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.close": "Close",
    "common.edit": "Edit",
    "common.delete": "Delete",
    "common.yes": "Yes",
    "common.no": "No",
    "common.loading": "Loading...",
    "common.error": "Error",
    "common.emptyClickToAdd": "(empty — click to add)",
    "common.collapse": "Collapse",
    "common.expand": "Expand",
    "common.rawJson": "Raw JSON",
    "common.clickToEdit": "Click any field to edit",
    "common.confidence": "Confidence",

    // page.*
    "page.dbView": "Database View",
    "page.manualEntry": "Manual Entry",
    "page.idlePrompt": "Enter an application ID to load the case context",
    "page.idleDescription": "Loads the same data the condenser agent receives from the database",
    "page.loadingContext": "Loading application context from the database...",
    "page.loadFailed": "Failed to load context",

    // controlRow.*
    "controlRow.applicationId": "Application ID",
    "controlRow.placeholder": "e.g. a0000001-1111-2222-3333-444444444444",
    "controlRow.idle": "Idle",
    "controlRow.loadingStatus": "Loading...",
    "controlRow.loaded": "Loaded",
    "controlRow.errorStatus": "Error",
    "controlRow.loadContext": "Load Context",
    "controlRow.runAgents": "Run Agents",
    "controlRow.running": "Running...",
    "controlRow.parties": "parties",
    "controlRow.documents": "documents",
    "controlRow.at": "at",
    "controlRow.step1Running": "Step 1/2: Running condenser agent...",
    "controlRow.step1Done": "Step 1/2 complete, starting legal search...",
    "controlRow.step2Running": "Step 2/2: Running legal search...",
    "controlRow.agentsComplete": "Agents complete",
    "controlRow.condenserFailed": "Condenser agent failed",
    "controlRow.legalSearchFailed": "Legal search failed",

    // structuredPanel.*
    "structuredPanel.title": "Structured Context",
    "structuredPanel.application": "Application",
    "structuredPanel.applicationNumber": "Application Number",
    "structuredPanel.status": "Status",
    "structuredPanel.processingStage": "Processing Stage",
    "structuredPanel.transactionType": "Transaction Type",
    "structuredPanel.transactionValue": "Transaction Value",
    "structuredPanel.subjectEn": "Subject (English)",
    "structuredPanel.subjectAr": "Subject (Arabic)",
    "structuredPanel.poaDurationType": "POA Duration Type",
    "structuredPanel.poaStartDate": "POA Start Date",
    "structuredPanel.poaEndDate": "POA End Date",
    "structuredPanel.submittedAt": "Submitted At",
    "structuredPanel.parties": "Parties",
    "structuredPanel.noParties": "No parties found",
    "structuredPanel.firstParty": "First Party",
    "structuredPanel.secondParty": "Second Party",
    "structuredPanel.thirdParty": "Third Party",
    "structuredPanel.fullNameEn": "Full Name (English)",
    "structuredPanel.fullNameAr": "Full Name (Arabic)",
    "structuredPanel.capacity": "Capacity",
    "structuredPanel.idType": "ID Type",
    "structuredPanel.idNumber": "ID Number",
    "structuredPanel.idExpiry": "ID Expiry Date",
    "structuredPanel.nationality": "Nationality",
    "structuredPanel.gender": "Gender",
    "structuredPanel.phone": "Phone",
    "structuredPanel.email": "Email",
    "structuredPanel.permissions": "Powers to be Granted",
    "structuredPanel.noPermissions": "No permissions found",
    "structuredPanel.poaFullText": "Full POA Text",
    "structuredPanel.proof": "Proof",
    "structuredPanel.capacityType": "Capacity Type",
    "structuredPanel.crNumber": "CR Number",
    "structuredPanel.companyName": "Company Name",
    "structuredPanel.crExpiry": "CR Expiry Date",
    "structuredPanel.poaDate": "POA Date",
    "structuredPanel.poaExpiry": "POA Expiry",
    "structuredPanel.generalPoa": "General POA",
    "structuredPanel.specialPoa": "Special POA",
    "structuredPanel.substitutionRight": "Substitution Right",
    "structuredPanel.english": "English",
    "structuredPanel.arabic": "Arabic",
    "structuredPanel.fullStructuredJson": "Full Structured Data (JSON)",

    // unstructuredPanel.*
    "unstructuredPanel.title": "Document Extractions",
    "unstructuredPanel.noExtractions": "No document extractions available.",
    "unstructuredPanel.rawTextAr": "Raw Text (Arabic)",
    "unstructuredPanel.rawTextEn": "Raw Text (English)",
    "unstructuredPanel.noRawText": "No raw text available for this document",
    "unstructuredPanel.extractedFields": "Extracted Fields",
    "unstructuredPanel.fullUnstructuredJson": "Full Unstructured Data (JSON)",

    // docTypes.*
    "docTypes.PERSONAL_ID": "Personal ID",
    "docTypes.COMMERCIAL_REGISTRATION": "Commercial Registration",
    "docTypes.AUTHORIZATION": "Authorization",
    "docTypes.POWER_OF_ATTORNEY": "Power of Attorney",
    "docTypes.PASSPORT": "Passport",
    "docTypes.TRADE_LICENSE": "Trade License",
    "docTypes.FOUNDATION_CONTRACT": "Foundation Contract",
    "docTypes.ESTABLISHMENT_RECORD": "Establishment Record",

    // manualEntry.*
    "manualEntry.title": "Manual Entry",
    "manualEntry.idle": "Idle",
    "manualEntry.running": "Running...",
    "manualEntry.completed": "Completed",
    "manualEntry.failed": "Failed",
    "manualEntry.attachment": "attachment",
    "manualEntry.attachments": "attachments",
    "manualEntry.saved": "saved",
    "manualEntry.condenser": "Condenser",
    "manualEntry.legalSearch": "Legal Search",

    // appForm.*
    "appForm.title": "Application Data",
    "appForm.subtitle": "Manual Entry",
    "appForm.applicationType": "Application Type",
    "appForm.selectType": "— Select application type —",
    "appForm.firstParty": "First Party",
    "appForm.secondParty": "Second Party",
    "appForm.capacity": "Capacity",
    "appForm.selectPlaceholder": "— Select —",
    "appForm.selectCapacity": "— Select capacity —",
    "appForm.idType": "ID Type",
    "appForm.selectIdType": "— Select ID type —",
    "appForm.idNumber": "ID Number",
    "appForm.expirationDate": "Expiration Date",
    "appForm.citizenship": "Citizenship",
    "appForm.fullName": "Full Name",
    "appForm.phone": "Phone",
    "appForm.email": "Email",
    "appForm.namadhij": "Namadhij (Powers to be Granted)",
    "appForm.namadhijPlaceholder": "Enter the powers / permissions to be granted...",

    // attachPanel.*
    "attachPanel.title": "SAK Attachment Extraction (OCR)",
    "attachPanel.subtitle": "Manual Entry",
    "attachPanel.addAttachment": "Add Attachment",
    "attachPanel.selectType": "Select attachment type:",
    "attachPanel.extractedFields": "Extracted Fields",
    "attachPanel.signatories": "Authorized Signatories",
    "attachPanel.addSignatory": "Add Signatory",
    "attachPanel.noSignatories": "No signatories added yet",
    "attachPanel.rawTextAr": "Raw Text (Arabic)",
    "attachPanel.rawTextEn": "Raw Text (English)",
    "attachPanel.rawText": "Raw Text",
    "attachPanel.saved": "Saved",
    "attachPanel.unsavedChanges": "Unsaved changes",
    "attachPanel.saveAttachment": "Save Attachment",
    "attachPanel.savedMessage": "Attachment details saved",
    "attachPanel.unsavedMessage": "Unsaved changes",
    "attachPanel.deleteAttachment": "Delete Attachment",
    "attachPanel.emptyState": "Click \"+ Add Attachment\" to create a new attachment",
    "attachPanel.nameEn": "Name (English)",
    "attachPanel.idNumberField": "ID Number",
    "attachPanel.nationalityEn": "Nationality (English)",
    "attachPanel.percentage": "Percentage",
    "attachPanel.position": "Position",

    // validation.*
    "validation.tier1Failed": "Tier-1 Check Failed",
    "validation.tier1Warnings": "Tier-1 Check Warnings",
    "validation.errors": "Errors",
    "validation.warnings": "Warnings",
    "validation.errorCount": "error(s)",
    "validation.warningCount": "warning(s)",
    "validation.goBackAndFix": "Go Back & Fix",
    "validation.proceedWithWarnings": "Proceed with Warnings",
    "validation.fixErrors": "Fix errors before running agents",

    // validation.* - Category names
    "validation.expiredDocument": "Expired Document",
    "validation.missingData": "Missing Data",
    "validation.crossValidation": "Cross-Validation",
    "validation.crossValidationMismatch": "Cross-Validation Mismatch",
    "validation.missingAttachment": "Missing Attachment",
    "validation.unsavedData": "Unsaved Data",

    // validation.* - Messages for runTier1Checks
    "validation.unknownParty": "Unknown Party",
    "validation.idOf": "ID of",
    "validation.expiredOn": "expired on",
    "validation.partyNationalId": "Party national ID",
    "validation.poaEndDatePast": "POA end date is in the past",
    "validation.capacityProof": "Capacity Proof",
    "validation.poaExpiryPast": "POA expiry is in the past",
    "validation.crExpiryPast": "CR expiry is in the past",
    "validation.extractedIdOf": "Extracted ID of",
    "validation.unknown": "Unknown",
    "validation.docExtraction": "Document extraction #",
    "validation.noIdInStructured": "has no ID number in structured data",
    "validation.noIdExtractionFound": "No ID extraction found for",
    "validation.idNumber": "ID Number",
    "validation.partyNoMatchingExtraction": "Party in structured data has no matching ID extraction",
    "validation.idExpiryMismatch": "ID expiry date mismatch",
    "validation.structured": "Structured",
    "validation.extracted": "Extracted",
    "validation.nationalityMismatch": "Nationality mismatch",
    "validation.nameMismatch": "Name mismatch with extracted ID",
    "validation.idTypeMismatch": "ID type mismatch",
    "validation.unmatchedExtraction": "has no matching party in structured data",
    "validation.applicationNumberEmpty": "Application number is empty",
    "validation.partyHasNoName": "has no name",
    "validation.partyIdLabel": "ID Number",
    "validation.noPartiesFound": "No parties found in structured data",
    "validation.party": "Party",

    // validation.* - Messages for runManualTier1Checks
    "validation.firstParty": "First Party",
    "validation.secondParty": "Second Party",
    "validation.noAppTypeSelected": "No application type selected",
    "validation.partyNoName": "has no name",
    "validation.partyNoId": "has no ID number",
    "validation.noAttachments": "No attachments added",
    "validation.partiesButNoId": "Parties exist but no personal ID attached",
    "validation.addIdBeforeAgents": "Add personal ID attachment for each party before running agents",
    "validation.unsavedAttachments": "attachment(s) with unsaved changes",
    "validation.saveBeforeAgents": "Save all attachments before running agents to ensure data is included",
    "validation.noName": "No name",
    "validation.idExpiredOn": "ID expired on",
    "validation.idAttachmentNum": "ID attachment #",
    "validation.attachment": "Attachment",
    "validation.crOf": "Commercial Registration of",
    "validation.crNum": "CR #",
    "validation.expiredOnDate": "expired on",
    "validation.signatoryLabel": "Authorized Signatory #",
    "validation.signatoryIdNoMatch": "ID number doesn't match any party",
    "validation.expectedOneOf": "Expected one of",
    "validation.signatoryNameNoMatch": "doesn't match any party name",
    "validation.partyNames": "Party names",
    "validation.signatoryNationalityMismatch": "Nationality mismatch with",
    "validation.signatory": "Signatory",
    "validation.noIdAttachmentForParty": "No matching ID attachment found for ID number of",
    "validation.noMatchingIdExtraction": "No matching ID extraction",
    "validation.formLabel": "Form",

    // resultsDrawer.*
    "resultsDrawer.title": "Agent Results",
    "resultsDrawer.legalBrief": "Legal Brief",
    "resultsDrawer.legalOpinion": "Legal Opinion",
    "resultsDrawer.rawJson": "Raw JSON",
    "resultsDrawer.close": "Close",
    "resultsDrawer.caseSummary": "Case Summary",
    "resultsDrawer.applicationNumber": "Application Number",
    "resultsDrawer.transactionType": "Transaction Type",
    "resultsDrawer.description": "Description",
    "resultsDrawer.parties": "Parties",
    "resultsDrawer.party": "party",
    "resultsDrawer.partiesPlural": "parties",
    "resultsDrawer.nameAr": "Name (Arabic)",
    "resultsDrawer.nameEn": "Name (English)",
    "resultsDrawer.idNumber": "ID Number",
    "resultsDrawer.nationality": "Nationality",
    "resultsDrawer.claimedCapacity": "Claimed Capacity",
    "resultsDrawer.capacityEvidence": "Capacity Evidence",
    "resultsDrawer.entityInfo": "Entity Information",
    "resultsDrawer.companyAr": "Company (Arabic)",
    "resultsDrawer.companyEn": "Company (English)",
    "resultsDrawer.registrationNumber": "Registration Number",
    "resultsDrawer.entityType": "Entity Type",
    "resultsDrawer.registeredAuthorities": "Registered Authorities",
    "resultsDrawer.name": "Name",
    "resultsDrawer.position": "Position",
    "resultsDrawer.authorityScope": "Authority Scope",
    "resultsDrawer.id": "ID",
    "resultsDrawer.poaDetails": "POA Details",
    "resultsDrawer.type": "Type",
    "resultsDrawer.duration": "Duration",
    "resultsDrawer.substitutionRight": "Substitution Right",
    "resultsDrawer.grantedPowers": "Granted Powers",
    "resultsDrawer.poaTextEn": "POA Text (English)",
    "resultsDrawer.poaTextAr": "POA Text (Arabic)",
    "resultsDrawer.evidenceSummary": "Evidence Summary",
    "resultsDrawer.document": "document",
    "resultsDrawer.documentsPlural": "documents",
    "resultsDrawer.factComparisons": "Fact Comparisons",
    "resultsDrawer.comparison": "comparison",
    "resultsDrawer.comparisons": "comparisons",
    "resultsDrawer.factType": "Fact",
    "resultsDrawer.source1": "Source 1",
    "resultsDrawer.source2": "Source 2",
    "resultsDrawer.match": "Match",
    "resultsDrawer.notes": "Notes",
    "resultsDrawer.openQuestions": "Open Questions",
    "resultsDrawer.question": "question",
    "resultsDrawer.questions": "questions",
    "resultsDrawer.missingInfo": "Missing Information",
    "resultsDrawer.item": "item",
    "resultsDrawer.items": "items",
    "resultsDrawer.extractionConfidence": "Extraction Confidence",
    "resultsDrawer.generatedAt": "Generated At",
    "resultsDrawer.application": "Application",
    "resultsDrawer.confidenceLevel": "Confidence Level",
    "resultsDrawer.condenserLabel": "Condenser Agent (Legal Brief)",
    "resultsDrawer.legalSearchLabel": "Legal Search Agent (Opinion)",
    "resultsDrawer.opinionSummary": "Opinion Summary",
    "resultsDrawer.englishSummary": "English Summary",
    "resultsDrawer.arabicSummary": "Arabic Summary",
    "resultsDrawer.issuesAnalyzed": "Issues Analyzed",
    "resultsDrawer.issue": "issue",
    "resultsDrawer.issues": "issues",
    "resultsDrawer.supportingArticles": "Supporting Articles",
    "resultsDrawer.article": "Article",
    "resultsDrawer.concerns": "Concerns",
    "resultsDrawer.recommendations": "Recommendations",
    "resultsDrawer.conditions": "Conditions",
    "resultsDrawer.citations": "Legal Citations",
    "resultsDrawer.articlesCount": "articles",
    "resultsDrawer.similarity": "Similarity",
    "resultsDrawer.laws": "laws",
    "resultsDrawer.unknownLaw": "Unknown Law",
    "resultsDrawer.crossRef": "cross-ref",
    "resultsDrawer.source": "Source",
    "resultsDrawer.verificationMetrics": "Verification Metrics",
    "resultsDrawer.groundingScore": "Grounding Score",
    "resultsDrawer.retrievalCoverage": "Retrieval Coverage",
    "resultsDrawer.coverageScore": "Coverage Score",
    "resultsDrawer.iterations": "Iterations",
    "resultsDrawer.articles": "Articles",
    "resultsDrawer.stopReason": "Stop Reason",
    "resultsDrawer.avgSimilarity": "Avg Similarity",
    "resultsDrawer.top3Similarity": "Top-3 Similarity",
    "resultsDrawer.responseTime": "Response Time",
    "resultsDrawer.estimatedCost": "Estimated Cost",
    "resultsDrawer.noCondenserResults": "No condenser agent results yet.",
    "resultsDrawer.legalSearchRunning": "Legal search agent is running... this may take a while",
    "resultsDrawer.legalSearchFailed": "Legal search agent failed",
    "resultsDrawer.legalSearchPending": "Legal search has not run yet. It will start automatically",
    "resultsDrawer.noResults": "No results yet.",
    "resultsDrawer.valid": "VALID",
    "resultsDrawer.invalid": "INVALID",
    "resultsDrawer.validWithConditions": "VALID WITH CONDITIONS",
    "resultsDrawer.requiresReview": "REQUIRES REVIEW",
    "resultsDrawer.inconclusive": "INCONCLUSIVE",
    "resultsDrawer.needsReview": "Needs Review",
    "resultsDrawer.validBucket": "Valid",
    "resultsDrawer.validWithRemediations": "Valid with Remediations",
    "resultsDrawer.invalidBucket": "Invalid",
  },
};

interface LocaleContextValue {
  locale: Locale;
  setLocale: (l: Locale) => void;
  t: (key: string) => string;
}

const LocaleContext = createContext<LocaleContextValue>({
  locale: "ar",
  setLocale: () => {},
  t: (key: string): string => key,
});

export function LocaleProvider({ children }: { children: ReactNode }) {
  const [locale, setLocale] = useState<Locale>("ar");

  useEffect(() => {
    document.documentElement.lang = locale;
    document.documentElement.dir = locale === "ar" ? "rtl" : "ltr";
  }, [locale]);

  const t = (key: string): string => {
    return TRANSLATIONS[locale][key] ?? key;
  };

  return (
    <LocaleContext.Provider value={{ locale, setLocale, t }}>
      {children}
    </LocaleContext.Provider>
  );
}

export function useLocale(): LocaleContextValue {
  return useContext(LocaleContext);
}
